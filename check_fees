<?php
// check_fees.php - Check what's in the fee tables
require_once 'config/database.php';

echo "<h2>Fee Records Check</h2>";

$db = new Database();

// Check platform_fees table
echo "<h3>Platform Fees:</h3>";
$db->query('SELECT * FROM platform_fees');
$fees = $db->resultSet();

foreach ($fees as $fee) {
    echo "Topic ID: {$fee->topic_id}, Amount: \${$fee->fee_amount}, Status: '{$fee->status}'<br>";
}

// Check creator_payouts table  
echo "<h3>Creator Payouts:</h3>";
$db->query('SELECT * FROM creator_payouts');
$payouts = $db->resultSet();

foreach ($payouts as $payout) {
    echo "Topic ID: {$payout->topic_id}, Net: \${$payout->net_amount}, Status: '{$payout->status}'<br>";
}

// Simple count
$db->query('SELECT COUNT(*) as count, SUM(fee_amount) as total FROM platform_fees');
$simple_stats = $db->single();
echo "<h3>Simple Stats:</h3>";
echo "Records: {$simple_stats->count}, Total: \${$simple_stats->total}<br>";
?>
